import{s as l,u as e,S as r}from"./index-eNBx6K3w.js";const d=l({id:"loadingStore",state:()=>({loadingStatus:{getProduct:"",updateQty:""}})}),o="https://vue3-course-api.hexschool.io/v2",i="runweiting",g=l("cartStore",{state:()=>({cartList:[],cartTotal:0}),actions:{addToCart(t,a=1){const s=d();s.loadingStatus.updateQty=t;const c=`${o}/api/${i}/cart`,n={product_id:t,qty:a};e.post(c,{data:n}).then(u=>{r.fire({title:u.data.message,icon:"success",showConfirmButton:!1,timer:1500}),s.loadingStatus.updateQty="",this.getCart()})},getCart(){const t=`${o}/api/${i}/cart`;e.get(t).then(a=>{this.cartList=a.data.data.carts,this.cartTotal=a.data.data.total})},async putCart(t){const a=d();a.loadingStatus.updateQty=t.id;const s=`${o}/api/${i}/cart/${t.id}`,c={product_id:t.product_id,qty:t.qty};try{const n=await e.put(s,{data:c});r.fire({title:n.data.message,icon:"success",showConfirmButton:!1,timer:1500}),a.loadingStatus.updateQty=""}finally{this.getCart()}},deleteCart(t){const a=`${o}/api/${i}/cart/${t}`;e.delete(a).then(s=>{r.fire({title:s.data.message,icon:"success",showConfirmButton:!1,timer:1500}),this.getCart()})},deleteCarts(){const t=`${o}/api/${i}/carts`;e.delete(t).then(a=>{r.fire({title:a.data.message,icon:"success",showConfirmButton:!1,timer:1500}),this.getCart()})}}});export{g as c,d as l};
