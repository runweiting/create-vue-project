import{_ as p,J as c,S as o,r as f,o as _,c as h,a as e,y as d,I as u,b as w,w as x,d as g}from"./index-XYnlPS3W.js";var T={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/create-vue-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:v}=T,b={data(){return{user:{username:"",password:""}}},created(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");s&&(this.axios.defaults.headers.common.Authorization=s)},methods:{login(){if(c()){o.fire({title:"已成功登入，不需重複登入",icon:"success",showConfirmButton:!1,timer:1500}),this.goToAdmin();return}const s=`${v}/admin/signin`;this.axios.post(s,this.user).then(t=>{const{expired:i,token:a}=t.data;document.cookie=`myToken=${a}; expires=${new Date(i)}`,o.fire({title:"您已成功登入",icon:"success",showConfirmButton:!1,timer:1500}).then(()=>{this.goToAdmin()}),this.user={}}).catch(t=>{t.response&&t.response.status===400?o.fire({title:"登入帳號或密碼錯誤",text:"請輸入正確的帳號和密碼",icon:"error",confirmButtonText:"OK"}):(this.user.username===""||this.user.password==="")&&o.fire({title:"請輸入登入信箱和密碼",icon:"error",confirmButtonText:"OK"}),console.log(t)})},goToAdmin(){c()?(o.fire({title:"這是後台商品頁面",icon:"success",showConfirmButton:!1,timer:1500}),this.$router.push({name:"admin"})):(o.fire({title:"請先登入",icon:"error",confirmButtonText:"OK"}),this.$router.push({name:"login"}))}}},P={class:"container"},k=e("h1",{class:"pt-5 text-center"},"登入後台",-1),y={class:"row py-5 flex-column align-items-center"},A=e("div",{class:"col-md-6 text-center mb-3"},[e("h3",null,"請先登入")],-1),B={class:"col-md-6"},E={class:"form-floating mb-3"},V=e("label",{for:"floatingInput"},"Email address",-1),I={class:"form-floating mb-3"},C=e("label",{for:"floatingPassword"},"Password",-1),U={class:"d-flex gap-2"},$=e("p",{class:"text-secondary text-center pt-5"},"© create-vue-project",-1);function D(s,t,i,a,r,l){const m=f("router-link");return _(),h("main",P,[k,e("div",y,[A,e("div",B,[e("form",null,[e("div",E,[d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>r.user.username=n),type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com",autocomplete:"email"},null,512),[[u,r.user.username]]),V]),e("div",I,[d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>r.user.password=n),type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",autocomplete:"current-password"},null,512),[[u,r.user.password]]),C]),e("div",U,[w(m,{to:"/",class:"btn btn-primary w-50"},{default:x(()=>[g("回到首頁")]),_:1}),e("button",{onClick:t[2]||(t[2]=(...n)=>l.login&&l.login(...n)),type:"button",class:"btn btn-primary w-50"}," 登入 ")])]),$])])])}const O=p(b,[["render",D]]);export{O as default};
