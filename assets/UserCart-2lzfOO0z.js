import{H as V,q as _,_ as h,r as n,o as g,c as b,a as e,t as x,b as o,w as S,A as m,y as C,I as w,S as p}from"./index-3BFtmY3B.js";import{c as y}from"./cartStore-bx_W9-di.js";import{C as O}from"./CartList-i3cWfIpw.js";import{c as U}from"./couponsStore-5zBs7Lwj.js";import"./showSuccessToast-XZ_OtTpV.js";import"./showErrorToast-iMbqEZuG.js";const E={emits:["sendOrder"],data(){return{title:"訂購訊息",data:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ErrorMessage:V},methods:{..._(U,["clearCoupon"]),onSubmit(){this.$emit("sendOrder",this.data),this.clearCoupon()},resetForm(){this.$refs.form.resetForm(),this.data.message=""}}},F={class:"col-8",style:{"padding-inline":"4.5rem"}},$={class:"form-floating mb-3"},k=e("label",{for:"floatingEmail",class:"form-label"},"Email",-1),q={class:"form-floating mb-3"},B=e("label",{for:"floatingName",class:"form-label"},"收件人姓名",-1),D={class:"form-floating mb-3"},T=e("label",{for:"floatingTel",class:"form-label"},"收件人電話",-1),A={class:"form-floating mb-3"},M=e("label",{for:"floatingAddress",class:"form-label"},"收件人地址",-1),N={class:"mb-3"},K=e("label",{for:"message",class:"form-label"},"留言",-1),P=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function z(c,s,u,i,t,f){const l=n("VField"),r=n("ErrorMessage"),v=n("VForm");return g(),b("div",F,[e("h2",null,x(t.title),1),o(v,{ref:"form",onSubmit:f.onSubmit},{default:S(({errors:d})=>[e("div",$,[o(l,{modelValue:t.data.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.data.user.email=a),rules:"required|email",class:m([{"is-invalid":d.email},"form-control"]),type:"email",id:"floatingEmail",name:"email",placeholder:"請輸入email"},null,8,["modelValue","class"]),k,o(r,{name:"email",class:"invalid-feedback"})]),e("div",q,[o(l,{modelValue:t.data.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.data.user.name=a),rules:"required",class:m([{"is-invalid":d.姓名},"form-control"]),type:"text",id:"floatingName",name:"姓名",placeholder:"請輸入姓名"},null,8,["modelValue","class"]),B,o(r,{name:"姓名",class:"invalid-feedback"})]),e("div",D,[o(l,{modelValue:t.data.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.data.user.tel=a),rules:"required|min:8|max:10",class:m([{"is-invalid":d.電話},"form-control"]),type:"tel",id:"floatingTel",name:"電話",placeholder:"請輸入電話"},null,8,["modelValue","class"]),T,o(r,{name:"電話",class:"invalid-feedback"})]),e("div",A,[o(l,{modelValue:t.data.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.data.user.address=a),rules:"required",class:m([{"is-invalid":d.地址},"form-control"]),type:"text",id:"floatingAddress",name:"地址",placeholder:"請輸入地址"},null,8,["modelValue","class"]),M,o(r,{name:"地址",class:"invalid-feedback"})]),e("div",N,[K,C(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.data.message=a),id:"message",cols:"30",rows:"10",class:"form-control"},null,512),[[w,t.data.message]])]),P]),_:1},8,["onSubmit"])])}const H=h(E,[["render",z]]),I={components:{CartList:O,OrderDetail:H},data(){return{apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"runweiting"}},methods:{..._(y,["getCart"]),createOrder(c){const s={data:c},u=`${this.apiUrl}/api/${this.apiPath}/order`;this.axios.post(u,s).then(i=>{p.fire({title:i.data.message,icon:"success",confirmButtonText:"OK"}),this.$refs.orderDetail.resetForm(),this.getCart()}).catch(i=>{p.fire({title:i.data.message,icon:"error",confirmButtonText:"OK"})})}}},L={class:"container"},j=e("h1",{class:"pt-5 text-center"},"我的購物車",-1),G={class:"row"},J={class:"col"},Q={class:"col"};function R(c,s,u,i,t,f){const l=n("cart-list"),r=n("order-detail");return g(),b("div",L,[j,e("div",G,[e("div",J,[o(l,{class:"w-100 py-3"})]),e("div",Q,[o(r,{class:"w-100 mt-4 p-3",onSendOrder:f.createOrder,ref:"orderDetail"},null,8,["onSendOrder"])])])])}const te=h(I,[["render",R]]);export{te as default};
