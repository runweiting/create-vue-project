import{_ as p,E as v,r as n,o as h,c as g,a as e,t as V,b as a,w as x,n as m,h as O,s as S,j as w,S as _}from"./index-rw1dmYIz.js";import{c as y}from"./cartStore-ioxCxxjo.js";import{C}from"./CartList-3EbwPv-V.js";const E={emits:["sendOrder"],data(){return{title:"訂購訊息",data:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ErrorMessage:v},methods:{OnSubmit(){this.$emit("sendOrder",this.data)},resetForm(){this.$refs.form.resetForm(),this.data.message=""}}},U={class:"col-8",style:{"padding-inline":"4.5rem"}},F={class:"form-floating mb-3"},$=e("label",{for:"floatingEmail",class:"form-label"},"Email",-1),k={class:"form-floating mb-3"},B=e("label",{for:"floatingName",class:"form-label"},"收件人姓名",-1),D={class:"form-floating mb-3"},T=e("label",{for:"floatingTel",class:"form-label"},"收件人電話",-1),q={class:"form-floating mb-3"},M=e("label",{for:"floatingAddress",class:"form-label"},"收件人地址",-1),N={class:"mb-3"},A=e("label",{for:"message",class:"form-label"},"留言",-1),K=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function P(c,s,u,i,t,f){const l=n("VField"),r=n("ErrorMessage"),b=n("VForm");return h(),g("div",U,[e("h2",null,V(t.title),1),a(b,{ref:"form",onSubmit:f.OnSubmit},{default:x(({errors:d})=>[e("div",F,[a(l,{modelValue:t.data.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.data.user.email=o),rules:"required|email",class:m([{"is-invalid":d.email},"form-control"]),type:"email",id:"floatingEmail",name:"email",placeholder:"請輸入email"},null,8,["modelValue","class"]),$,a(r,{name:"email",class:"invalid-feedback"})]),e("div",k,[a(l,{modelValue:t.data.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.data.user.name=o),rules:"required",class:m([{"is-invalid":d.姓名},"form-control"]),type:"text",id:"floatingName",name:"姓名",placeholder:"請輸入姓名"},null,8,["modelValue","class"]),B,a(r,{name:"姓名",class:"invalid-feedback"})]),e("div",D,[a(l,{modelValue:t.data.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>t.data.user.tel=o),rules:"required|min:8|max:10",class:m([{"is-invalid":d.電話},"form-control"]),type:"tel",id:"floatingTel",name:"電話",placeholder:"請輸入電話"},null,8,["modelValue","class"]),T,a(r,{name:"電話",class:"invalid-feedback"})]),e("div",q,[a(l,{modelValue:t.data.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.data.user.address=o),rules:"required",class:m([{"is-invalid":d.地址},"form-control"]),type:"text",id:"floatingAddress",name:"地址",placeholder:"請輸入地址"},null,8,["modelValue","class"]),M,a(r,{name:"地址",class:"invalid-feedback"})]),e("div",N,[A,O(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=o=>t.data.message=o),id:"message",cols:"30",rows:"10",class:"form-control"},null,512),[[S,t.data.message]])]),K]),_:1},8,["onSubmit"])])}const j=p(E,[["render",P]]),z={components:{CartList:C,OrderDetail:j},data(){return{apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"runweiting"}},methods:{...w(y,["getCart"]),createOrder(c){const s={data:c},u=`${this.apiUrl}/api/${this.apiPath}/order`;this.axios.post(u,s).then(i=>{_.fire({title:i.data.message,icon:"success",confirmButtonText:"OK"}),this.$refs.orderDetail.resetForm(),this.getCart()}).catch(i=>{_.fire({title:i.data.message,icon:"error",confirmButtonText:"OK"})})}}},L={class:"container"},G=e("h1",{class:"pt-5 text-center"},"我的購物車",-1),H={class:"row"},I={class:"col"},J={class:"col"};function Q(c,s,u,i,t,f){const l=n("cart-list"),r=n("order-detail");return h(),g("div",L,[G,e("div",H,[e("div",I,[a(l,{class:"w-100 py-3"})]),e("div",J,[a(r,{class:"w-100 mt-4 p-3",onSendOrder:f.createOrder,ref:"orderDetail"},null,8,["onSendOrder"])])])])}const Y=p(z,[["render",Q]]);export{Y as default};
