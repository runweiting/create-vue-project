import{s as u,u as e,S as i}from"./index-SQJ36rKT.js";const d=u({id:"loadingStore",state:()=>({loadingStatus:{getProduct:"",updateQty:""}})}),o="https://vue3-course-api.hexschool.io/v2",c="runweiting",g=u("cartStore",{state:()=>({cartList:[],cartTotal:0}),actions:{addToCart(t,a=1){const s=d();s.loadingStatus.updateQty=t;const r=`${o}/api/${c}/cart`,n={product_id:t,qty:a};e.post(r,{data:n}).then(l=>{i.fire({title:l.data.message,icon:"success",confirmButtonText:"OK"}),s.loadingStatus.updateQty="",this.getCart()})},getCart(){const t=`${o}/api/${c}/cart`;e.get(t).then(a=>{this.cartList=a.data.data.carts,this.cartTotal=a.data.data.total})},async putCart(t){const a=d();a.loadingStatus.updateQty=t.id;const s=`${o}/api/${c}/cart/${t.id}`,r={product_id:t.product_id,qty:t.qty};try{const n=await e.put(s,{data:r});i.fire({title:n.data.message,icon:"success",confirmButtonText:"OK"}),a.loadingStatus.updateQty=""}finally{this.getCart()}},deleteCart(t){const a=`${o}/api/${c}/cart/${t}`;e.delete(a).then(s=>{i.fire({title:s.data.message,icon:"success",confirmButtonText:"OK"}),this.getCart()})},deleteCarts(){const t=`${o}/api/${c}/carts`;e.delete(t).then(a=>{i.fire({title:a.data.message,icon:"success",confirmButtonText:"OK"}),this.getCart()})}}});export{g as c,d as l};
