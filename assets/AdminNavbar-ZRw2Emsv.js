import{G as v,v as g,x as c,K as d,_ as b,q as f,r as u,o as k,c as x,a,b as t,w as s,F as T,d as i}from"./index-3BFtmY3B.js";import{s as _}from"./showSuccessToast-XZ_OtTpV.js";import{s as L}from"./showErrorToast-iMbqEZuG.js";var $={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/create-vue-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const E=v.useLoading(),{VITE_APP_URL:m}=$,w=g("loginStore",{actions:{checkLogin(){const o=E.show(),e=`${m}/api/user/check`,r=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");r&&(c.defaults.headers.common.Authorization=r),c.post(e).then(()=>{_("驗證成功")}).catch(l=>{L(l.response.data.message).then(()=>{d.push({name:"login"})})}).finally(()=>{o.hide()})},logout(){const o=`${m}/logout`;c.post(o).then(e=>{_(e.data.message).then(()=>{document.cookie="myToken=; expires=;",c.defaults.headers.common.Authorization=null,d.push({name:"home"})})})}}}),A={created(){this.checkLogin()},methods:{...f(w,["checkLogin","logout"])}},N={class:"navbar navbar-expand-lg navbar-dark bg-dark"},P={class:"container px-4"},S=a("a",{class:"navbar-brand mb-0",href:"index.html"},"UNIQLOLO",-1),V=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1),R={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},y={class:"navbar-nav gap-2"},I={class:"nav-item"},B={class:"nav-item"},O={class:"nav-item"},U={class:"nav-item"},C={class:"nav-item"},D={class:"nav-item"};function j(o,e,r,l,z,F){const n=u("RouterLink"),h=u("router-view");return k(),x(T,null,[a("header",null,[a("nav",N,[a("div",P,[S,V,a("div",R,[a("ul",y,[a("li",I,[t(n,{to:{name:"admin/products"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯商品")]),_:1})]),a("li",B,[t(n,{to:{name:"admin/orders"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯訂單")]),_:1})]),a("li",O,[t(n,{to:{name:"admin/coupons"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯優惠卷")]),_:1})]),a("li",U,[t(n,{to:{name:"admin/articles"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯文章")]),_:1})]),a("li",C,[t(n,{to:{name:"home"},class:"nav-link text-decoration-none"},{default:s(()=>[i("回到前台")]),_:1})]),a("li",D,[a("button",{onClick:e[0]||(e[0]=(...p)=>o.logout&&o.logout(...p)),type:"button",class:"btn btn-warning"}," 登出 ")])])])])])]),a("main",null,[t(h)])],64)}const K=b(A,[["render",j]]);export{K as default};
